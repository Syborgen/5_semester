<html>
<head>
<TITLE>Системные регистры</TITLE>
</HEAD>
<BODY>
<CENTER>
<H1> Системные регистры </H1>
<FONT SIZE="3">
</CENTER>

<UL>
 <LI><A HREF="#i486"> Системные регистры Intel i486 </A>
</UL>
<HR SIZE="4">
<P>
<H2><A NAME="i486"></A>Системные регистры Intel i486</H2>
<P>
 Системные регистры управляют функционированием микропроцессора i486 в целом 
и режимами работы отдельных внутренних блоков: процессора обработки данных с ПТ, 
кэш-памяти, диспечера памяти.<BR><p>
  Эти регистры доступны только в защищённом режиме для программ, имеющих уровень 
привелегий 0.<BR><p>
  Набор системных регистров включает три регистра управления (CR0, CR2, CR3) и 
четыре регистра системных адресов и сегментов (GDTR, IDTR, TR, LDTR).<BR><p>
  <B>Регистры управления CR0, CR2, CR3 </B>микропроцессора i486 32-разрядные, 
служат для фиксации общего состояния процессора. Эти регистры вместе с регистрами 
системных адресов хранят информацию о состоянии МП, которое затрагивает все 
задачи. Для доступа к регистрам управления определены специальные команды 
загрузки и сохранения.<A HREF="literatura.html">[1]</A><BR><p>
  <B>Регистр CR0 </B>включает 10 разрядов для управления работой и 
определения состояния микропроцессора. Впервые появились в регистре CR0 
микропроцессора i486 биты CD, NW, AM, WP и NE.<A HREF="literatura.html">[1]</A><BR><p>
  Функции управляющих разрядов регистра CR0 следующие:<BR>
<UL>
 <LI TYPE=DISC> управление режимом работы i486 (табл. 1): PG, PE;<BR>
 <LI TYPE=DISC> управление режимом работы внутренней кэш-памяти (табл. 2):CD, 
                NW;<BR>
 <LI TYPE=DISC> управление режимом работы (табл. 3): TS, EM, MP,NE;<BR>
 <LI TYPE=DISC> управление проверкой выравнивания: AM;<BR>
 <LI TYPE=DISC> защита от записи: WP.<BR>
</UL>
  Младшие 16 разрядов регистра CR) для совместимости с защищённым режимом МП 
80286 называют словом состояния машины (MSW). Команды загрузки и сохранения LMSW, 
SMSW для совместимости с МП 80286 работают только с младшими 16 разрядами 
регистра CR0. Новые системные программы, создаваемые для i486, должны использовать 
команды MOV CR0, Reg.<BR><p><A HREF="literatura.html">[1]</A>
<TABLE BORDER=1
       WEIGTH=40%>
<CAPTION>  Таблица 1. Режимы работы процессора </CAPTION>
    <TR>
     <TH> PG	 </TH>
     <TH ALIGN=center VALIGN=center> PE   </TH>
     <TH ALIGN=center VALIGN=center> Режим   </TH>
    <TR>
     <TD ALIGN=center VALIGN=center> 0 </TH>
     <TD ALIGN=center VALIGN=center> 0 </TD>                 
     <TD> Реальный режим. Режим микропроцессора 8086 с возможностью увеличения
          разрядности до 32 при использовании префиксов.</TD> 
    <TR>
     <TD ALIGN=center VALIGN=center> 0 </TD>
     <TD ALIGN=center VALIGN=center> 1  </TD>
     <TD> Защищённый режим. Режим микропроцессора 8086 с возможностью увеличения
          разрядности до 32 при использовании префиксов и дескрипторов кода.
          Как подмножество поддерживается режим виртуального 8086.</TD> 
    <TR>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD ALIGN=center VALIGN=center> 0 </TD>
     <TD> Недопустимая комбинация. Загрузка этого кода в регистр CR0 вызывает   
          генерацию исключения 0 </TD>  
    <TR>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD> Защищённый режим с использованием механизма страничной организации 
          памяти </TD>  
</TABLE><BR>
<TABLE BORDER=1
       WEIGTH=40%>
<CAPTION>  Таблица 2. Режимы работы внутренней кэш-памяти </CAPTION>
    <TR>
     <TH> CD	 </TH>
     <TH ALIGN=center VALIGN=center> NW   </TH>
     <TH ALIGN=center VALIGN=center> Режим   </TH>
    <TR>
     <TD ALIGN=center VALIGN=center> 1 </TH>
     <TD ALIGN=center VALIGN=center> 1 </TD>                 
     <TD> Запрещены заполнение строки, сквозная запись и закрытие строки.</TD> 
    <TR>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD ALIGN=center VALIGN=center> 0  </TD>
     <TD> Запрещено заполнение строки; сквозная запись и закрытие строки 
          разрешены</TD> 
    <TR>
     <TD ALIGN=center VALIGN=center> 0 </TD>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD> Недопустимая комбинация. Загрузка этого кода в регистр CR0 вызывает   
          исключение 13 с кодом ошибки 0  </TD>  
    <TR>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD> Разрешены заолнение строки, сквозная запись и закрытие строки. </TD>  
</TABLE><BR>
<TABLE BORDER=1
       WEIGTH=40%>
<CAPTION>  Таблица 2. Режимы работы внутренней кэш-памяти </CAPTION>
    <TR>
     <TH> CD	 </TH>
     <TH ALIGN=center VALIGN=center> NW   </TH>
     <TH ALIGN=center VALIGN=center> Режим   </TH>
    <TR>
     <TD ALIGN=center VALIGN=center> 1 </TH>
     <TD ALIGN=center VALIGN=center> 1 </TD>                 
     <TD> Запрещены заполнение строки, сквозная запись и закрытие строки.</TD> 
    <TR>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD ALIGN=center VALIGN=center> 0  </TD>
     <TD> Запрещено заполнение строки; сквозная запись и закрытие строки 
          разрешены</TD> 
    <TR>
     <TD ALIGN=center VALIGN=center> 0 </TD>
     <TD ALIGN=center VALIGN=center> 1 </TD>
     <TD> Недопустимая комбинация. Загрузка этого кода в регистр CR0 вызывает   
          исключение 13 с кодом ошибки 0  </TD>  
<br><p>
  <B>Регистр CR1 </B> зарезервирован.<br>
  <B>Регистр CR2 </B>иcпользуется, когда блок страничной адресации 
вырабатывает сигнал отказа, вызывающий прерывание 14 (отказ страницы). Причиной 
отказа может служить отсутствие страницы, к которой выполняется обращение, или 
недостаточный уровень привелегий программы, запрашивающей страницу с более 
высоким уровнем защищённости. В регистр CR2 заносится 32-разрядный линейный 
адрес, поступление которого в блок страничной адресации вызвало отказ. В стек 
программы при этом загружается соответствующий код ошибки.<BR><p>
  <B>Регистр CR3 </B>содержит базовый физический адрес каталога страниц. 
У микропроцессора i486 размер страниц фиксирован (4 Кбайта) и каталог выровнен 
по границам страниц, поэтому для указаниябазового адреса таблицы используются 
20 тсарших разрядов регистра CR0.<A HREF="literatura.html">[1]</A><br><p>
  <B>Регистры системных адресов и сегментов.</B> Регистры GDTR, IDTR, LDTR и TR 
(см. рис. 1) служат для обращения к таблицам и сегментам, с помощью которых 
осуществляется обращение к памяти в защищённом режиме:  
<UL>
 <LI TYPE=DISC> GDT (таблица глобальных дескрипторов);<BR>
 <LI TYPE=DISC> IDT (таблица дескрипторов прерываний);<BR>
 <LI TYPE=DISC> LDT (таблица локальных дескрипторов);<BR>
 <LI TYPE=DISC> TSS (сегмент состояния задач);<BR>
</UL>
  Регистр таблицы глобальных дескрипторов GDTR и регистр таблицы дескрипторов 
прерываний IDTR содержат 32-разрядные базовые адреса и 16-разрядные размеры таблиц 
GDT и IDT. Эти таблицы являются общими для всех задач.<A HREF="literatura.html">[1]</A><br><p>
  В регтистр таблицы локальных дескрипторов LDTR и регистр задачи TR заносятся 
16-разрядные селекторы, позволяющие обратится к таблице LDT и сегменту TSS, 
которые определены для каждой отдельной задачи. С каждым из этих регистров связан 
программно недоступный регистр дескриптора сегмента.
</body>
</html>