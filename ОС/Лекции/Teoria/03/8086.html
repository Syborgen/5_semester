<html>
<head>
<TITLE>Аппаратные прерывания Intel 8086</TITLE>
</HEAD>
<BODY>
<CENTER>
<H1>Аппаратные прерывания Intel 8086</H1>
<FONT SIZE="3">
</CENTER>

<UL>
 <LI><A HREF="#mask">Маскируемые внешние прерывания</A>
 <LI><A HREF="#not_mask">Немаскируемые внешние прерывания</A>
</UL>
<HR SIZE="4">
 В отличие от программных и внутренних прерываний, могут возникать асинхронно
по отношению к исполняемой программе. Они подразделяются на маскируемые и 
немаскируемые. Процессор может воспринимать прерывания после выполнения каждой
команды, длинные строковые команды имеют для восприятия прерываний специальные 
окна.<BR><p>
<P>
<H2><A NAME="mask">Маскируемые прерывания</A></H2>
<P>
Маскируемые прерывания вызываются переходом в высокий уровень сигнала на 
входе INTR (Interrupt Request) при установленном флаге разрешения (IF=1). В этом
случае процессор сохраняет в стеке регистр флагов, сбрасывает флаг IF и вырабатывает
два следующих друг за другом (back to back) цикла подтверждения прерывания, в 
которых генерируются управляющие сигналы INTA# (Interrupt Acknowledge).Высокий 
уровень сигнала INTR должен сохраняться, по крайней мере, дтверждения прерывания.
Первый цикл подтверждения - холостой (для совместимости с контроллером 8259А,
разработанного ещё для процесора 8080), по второму импульсу внешний контроллер
прерываний передайт по шине данных байт, содержащий номер вектора, обслуживающего 
данный тип аппаратного прерывания. Прерывание с полученным номером вектора 
выполняется процессором также, как и программное. Обработка текущего прерывания
может быть, в свою очередь, прервана немаскируемым прерыванием, а если обработчик 
установит флаг IF, то и другим маскируемым аппаратным прерыванием.После аппаратного
сброса флаг IF сброшен - прерывания запрещены до явного разрешения.<BR><p>
<P>
<H2><A NAME="not_mask">Немаскируемые прерывания</A></H2>
<P>
Немаскируемое прерывание выполняется независимо от состояния флага IF по 
сигналу NMI(Non Mascable Interrupt).Высокий уровень на этом входе вызовет прерывание
с типом (вектором) 2, которое выполняется так же, как и маскируемое. Его обработка
не может прерываться под действием сигнала на входе NMI до выполнения инструкции IRET.<BR> 
  Инструкция HALT переводит поцессор в состояние <I>останова</I>, из которого его 
может вывести только аппаратное прерывание или аппаратный сброс. В этом случае процесор
н управлляет локальной шиной (все тристабильные буферы отключены).<A HREF="../../literatura.html">[2]</A><BR><p>
  Инструкция WAIT заставляет процессор ожидать активного (низкий уровень)сигнала 
на входе TEST#. До появленияактивного сигнала процессор также не управляет локальной
шиной. В случае аппаратного прерывания по оканчании его обслуживания процессор 
снова вернётся в состояние ожидания. Проверка состояния входа TEST# используется
для синхронизации с математическим сопроцессором 8087.<A HREF="../../literatura.html">[2]</A><BR><p>
  Интерфейс 8086/88 допускает наличие на своей локальной шине других контроллеров
(например, прямого доступа к памяти - DMA), а также позволяет строить многопроцессорные 
системы. Управление шиной может передаваться от процессора другому контроллеру
по соответствующему запросу.  Для монополизации шины на время выполнения команды 
предусмотрена инструкция-префикс LOCK, которая запрещает процессору отдать управление
шиной до окончания выполнения данной команды. Таким образом можно обеспечивать 
целостность данных в тех случаях, когда к области данных, учавствующих в команде, 
возможен доступ и со стороны другого процессора(контроллера) - например, при работе 
с программными семафорами в цикле чтение-модификация-запись.<A HREF="../../literatura.html">[2]</A> 
<BR><P>
</body>                                  
</html>

