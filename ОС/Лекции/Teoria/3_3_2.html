<HTML>
<HEAD>
<TITLE>Oперации ввода/вывода</TITLE>
</HEAD>
<BODY>
<CENTER>
<H1>Oперации ввода/вывода</H1>
<FONT SIZE="3">
</CENTER>

<p>
В командах ввода/вывода  источником (или получателем) всегда служит функциональный регистр 
AX, а порт определяется как непосредственный операнд или содержимое регистра DX. 
Порт представляет собой устройство, которое соединяет процессор с внешним миром. 
Через порт процессор получает сигналы с устройств ввода и посылает сигналы на устройство 
вывода. Теоретически процессор может управлять до 65536 портами, начиная с нулевого
порта. Для управления вводом-выводом непосредственно на уровне порта используются команды
IN и OUT:
<UL>
<LI type=disc>Команда IN передает данные из входного порта в регистр AL (байт) или
в регистр AX (слово). Формат команды:
<center><pre>IN       регистр, порт</center></pre>
</LI>
<LI>Команда OUT передает данные в порт из регистра AL (байт) или из регистра AX (слово).
Формат команды:
<center><pre>OUT       порт, регистр</center></pre>
</LI>
</UL>
<p>
Номер порта можно указывать статически или динамически:
<OL>
<LI>Статическое указание порта возможно при непостедственном использовании значения 
от 0 до 255:
<center>
<pre>
Ввод:     IN    AL, порт#       ;Ввод одного байта 
Вывод:    OUT   порт#, AX       ;Вывод одного слова</pre>
</center>
</LI>
<LI>Динамическое указание портаустанавливается врегистре DX от 0 до 65535. Этот метод
удобен для последовательной обработки нескольких портов. Значение врегистре DX  в этом
случае увеличивается в цикле на 1. Пример ввода байта из порта 60H (клавиатура):
<center>
<pre>
MOV         DX, 60H     ;Порт 60H 
IN          AL,DX       ;Ввод байта
</pre>
</center>
</LI>
</OL><p>
Ниже приведен список некоторых портов (номера в шестнадцатиричном представлении)<A HREF="literatura.html">[5]</A>:
<pre>
21            Регистры маски прерываний
40...42       Таймер/счетчик
60            Ввод с клавиатуры
61            Звуковой порт (биты 0 и 1)
201           Управление играми
3B0...3BF     Монохромный дисплей и параллельный адаптер печати
3D0...3DF     Цветной/графический адаптер
3F0...3F7     Дисковый контроллер     
</pre>
<p>
Если, например, программа запрашивает ввод с клавиатуры, то она выдает команду прерываний
INT 16H. В этом случае система устанавливает связь с BIOS, которая с помощью команды
IN вводит байт с порта 60H.
<p>
На практике рекомендуется пользоваться прерываниями DOS и BIOS. Однако можно также
успешно обойтись и без BIOS при работе с портами 21, 40...42, 60 и 201.
</HTML>